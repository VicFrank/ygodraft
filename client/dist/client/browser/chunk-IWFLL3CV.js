import{a as pe}from"./chunk-J5XR7R3F.js";import{e as re,f as ae,j as oe,k as se,l as ce}from"./chunk-7W32QZ3E.js";import{g as q,j as ne}from"./chunk-KIQKRQMD.js";import{Da as Y,Ea as J,La as ie,a as ee,b as z,ea as H,j as A,l as Q,xa as G,ya as te}from"./chunk-SWTC7RC3.js";import{Ca as M,Ga as o,Gb as d,Ha as C,Hb as F,Ib as B,Jb as $,Kb as h,Lb as u,Mb as _,Ra as m,S as x,Sa as V,T as U,X as P,Xa as k,a as W,b as N,d as S,ea as D,fa as I,hb as s,jb as O,na as v,nb as r,ob as a,pb as w,sc as j,tb as E,tc as L,ub as l,vb as f,yb as T}from"./chunk-WGZRAWDY.js";var le=(()=>{class n{constructor(t){this.http=t,this.cardsetsUrl="api/cardsets"}getAllCardsets(){return this.http.get(this.cardsetsUrl)}getAllCardsetsByType(t){return this.http.get(`${this.cardsetsUrl}?type=${t}`)}static{this.\u0275fac=function(i){return new(i||n)(P(z))}}static{this.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var de=(()=>{class n{constructor(t){this.http=t,this.baseUrl=`${ie.apiUrl}/packs`}generatePacks(t,i){return this.http.get(`${this.baseUrl}/open?cardset=${t}&numPacks=${i}`)}openSets(t,i){let e={cardsets:t,numPacks:i},c={headers:new ee().set("Content-Type","application/json")};return this.http.post(`${this.baseUrl}/openSets`,e,c)}static{this.\u0275fac=function(i){return new(i||n)(P(z))}}static{this.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var R=(()=>{class n{constructor(t,i,e){this.packOpener=t,this.cardService=i,this.collectionsService=e,this.packsToOpen=[],this.setsToOpen=[],this.openedCards=[],this.draftedCards=[],this.packsPerSet=1}shuffleArray(t){for(let i=t.length-1;i>0;i--){let e=Math.floor(Math.random()*(i+1));[t[i],t[e]]=[t[e],t[i]]}}resetDraft(t){this.packsToOpen=[],this.setsToOpen=[],this.openedCards=[],this.draftedCards=[],this.draftOptions=t}createCollection(){return S(this,null,function*(){let t=this.openedCards;this.draftOptions?.drafting&&(t=this.draftedCards);let i={};for(let b of t){let{card_name:K,card_id:Oe}=b;i[K]?i[K].copies+=1:i[K]={card_id:Oe,copies:1}}let e=Object.values(i).map(b=>b.card_id),c;try{c=yield this.cardService.bulkGetCards(e).toPromise()}catch(b){throw b}let p=c.map(b=>N(W({},b),{copies:i[b.card_name].copies,copies_in_use:0})),ve=t.length;this.collectionsService.createNewCollectionWeb(p,ve,!1)})}openSinglePack(t){return S(this,null,function*(){try{let e=(yield this.packOpener.generatePacks(t,1).toPromise())[0];return this.openedCards=this.openedCards.concat(e),e=e.map(c=>N(W({},c),{flipped:!1,selected:!1})),this.shuffleArray(e),e}catch(i){throw i}})}bulkOpenPacks(t){return S(this,null,function*(){let i=yield this.packOpener.generatePacks(t,this.packsPerSet).toPromise(),e=i.reduce((c,p)=>c.concat(p),[]);return this.openedCards=this.openedCards.concat(e),i})}openAllSets(){return S(this,null,function*(){let t=yield this.packOpener.openSets(this.setsToOpen,this.packsPerSet).toPromise(),i=t.reduce((e,c)=>e.concat(c),[]);return this.openedCards=this.openedCards.concat(i),this.setsToOpen=[],t})}addCardsToDraft(t){this.draftedCards=this.draftedCards.concat(t)}static{this.\u0275fac=function(i){return new(i||n)(P(de),P(pe),P(ce))}}static{this.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var me=(()=>{class n{constructor(){this.selectedSetsChange=new v,this.src="",this.name=""}ngOnInit(){this.name=this.set.set_name,this.name==="Legend of Blue Eyes White Dragon"&&(this.name="Legend of Blue Eyes"),this.src=`assets/images/cardsets/${this.set.set_code}.jpg`}toggleSelected(){let t=this.set.set_name;this.selectedSets.some(e=>e===t)?this.selectedSets=this.selectedSets.filter(e=>e!==t):this.selectedSets.push(t),this.selectedSetsChange.emit([...this.selectedSets])}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=m({type:n,selectors:[["app-setlist-pack"]],inputs:{set:"set",selectedSets:"selectedSets"},outputs:{selectedSetsChange:"selectedSetsChange"},standalone:!1,decls:5,vars:6,consts:[[1,"pack"],[2,"cursor","pointer",3,"click","src","alt"],[1,"set-name"],["name","selectedSets",3,"ngModelChange","onChange","ngModel","value"]],template:function(i,e){i&1&&(r(0,"div",0)(1,"img",1),l("click",function(){return e.toggleSelected()}),a(),r(2,"div",2),d(3),a(),r(4,"p-checkbox",3),_("ngModelChange",function(p){return u(e.selectedSets,p)||(e.selectedSets=p),p}),l("onChange",function(){return e.selectedSetsChange.emit(e.selectedSets)}),a()()),i&2&&(o(),T("src","assets/images/cardsets/small/",e.set.set_code,".jpg",M),s("alt",e.set.set_name),o(2),F(e.name),o(),h("ngModel",e.selectedSets),s("value",e.set.set_name))},dependencies:[Y,J,re],styles:[".pack[_ngcontent-%COMP%]{text-align:center;padding:.25rem 0}.pack[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:123px;height:226px;margin:0 .5rem}.set-name[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;font-size:13px}"]})}}return n})();var ge=(()=>{class n{constructor(){this.onOpenPacks=new v,this.onSelectAll=new v,this.onDeselectAll=new v,this.draftOptionsChange=new v,this.numPacksOptions=[{label:"1",value:1},{label:"6",value:6},{label:"12",value:12},{label:"24",value:24}],this.draftModeOptions=[{label:"Traditional",value:"Traditional"},{label:"Draft",value:"Draft"},{label:"Chaos Draft",value:"Chaos Draft"},{label:"Sealed",value:"Sealed",disabled:!0}],this.openingOptions=[{label:"Individual",value:"Individual"},{label:"Bulk",value:"Bulk"}]}ngOnInit(){let t=sessionStorage.getItem("drafting-options");if(t){let i=JSON.parse(t);if(i.numPacks>24)return;this.draftOptions=i,this.draftModeChanged()}}openPacks(){this.onOpenPacks.emit(this.draftOptions)}draftModeChanged(){this.draftOptions.draftMode==="Chaos Draft"?(this.onSelectAll.emit(),this.draftOptions.numPacks=1):this.onDeselectAll.emit(),this.draftOptions.drafting=this.draftOptions.draftMode.includes("Draft"),this.draftOptions.drafting&&(this.draftOptions.openingMethod="Individual"),this.optionsChanged()}optionsChanged(){sessionStorage.setItem("drafting-options",JSON.stringify(this.draftOptions)),this.draftOptionsChange.emit(this.draftOptions)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=m({type:n,selectors:[["app-drafting-options"]],inputs:{canOpen:"canOpen",draftOptions:"draftOptions"},outputs:{onOpenPacks:"onOpenPacks",onSelectAll:"onSelectAll",onDeselectAll:"onDeselectAll",draftOptionsChange:"draftOptionsChange"},standalone:!1,decls:14,vars:9,consts:[[1,"d-flex","justify-content-start","draft-options"],[3,"ngModelChange","onChange","options","ngModel"],[3,"ngModelChange","onChange","options","ngModel","disabled"],["label","Open!",1,"ms-auto","my-auto",3,"onClick","disabled"]],template:function(i,e){i&1&&(r(0,"div",0)(1,"div")(2,"h6"),d(3,"Draft Mode"),a(),r(4,"p-dropdown",1),_("ngModelChange",function(p){return u(e.draftOptions.draftMode,p)||(e.draftOptions.draftMode=p),p}),l("onChange",function(){return e.draftModeChanged()}),a()(),r(5,"div")(6,"h6"),d(7,"Packs"),a(),r(8,"p-dropdown",2),_("ngModelChange",function(p){return u(e.draftOptions.numPacks,p)||(e.draftOptions.numPacks=p),p}),l("onChange",function(){return e.optionsChanged()}),a()(),r(9,"div")(10,"h6"),d(11,"Opening Method"),a(),r(12,"p-dropdown",2),_("ngModelChange",function(p){return u(e.draftOptions.openingMethod,p)||(e.draftOptions.openingMethod=p),p}),l("onChange",function(){return e.optionsChanged()}),a()(),r(13,"p-button",3),l("onClick",function(){return e.openPacks()}),a()()),i&2&&(o(4),s("options",e.draftModeOptions),h("ngModel",e.draftOptions.draftMode),o(4),s("options",e.numPacksOptions),h("ngModel",e.draftOptions.numPacks),s("disabled",e.draftOptions.draftMode==="Chaos Draft"),o(4),s("options",e.openingOptions),h("ngModel",e.draftOptions.openingMethod),s("disabled",e.draftOptions.drafting),o(),s("disabled",!e.canOpen))},dependencies:[te,Y,J,oe],styles:[".draft-options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:.5rem 1rem}"]})}}return n})();function Ie(n,g){if(n&1){let t=E();r(0,"app-setlist-pack",4),_("selectedSetsChange",function(e){D(t);let c=f();return u(c.selectedSets,e)||(c.selectedSets=e),I(e)}),a()}if(n&2){let t=g.$implicit,i=f();s("set",t),h("selectedSets",i.selectedSets)}}var ue=(()=>{class n{constructor(t,i,e){this.cardsetService=t,this.router=i,this.draftingService=e,this.cardsets=[],this.selectedSets=[],this.draftOptions={numPacks:24,draftMode:"Traditional",openingMethod:"Individual",drafting:!1}}ngOnInit(){this.showBoosterSets()}showBoosterSets(){this.cardsetService.getAllCardsetsByType("booster").subscribe(t=>{this.cardsets=t,this.draftOptions.draftMode==="Chaos Draft"&&this.selectAllSets()})}selectAllSets(){this.selectedSets=this.cardsets.map(t=>t.set_name)}clearSelectedSets(){this.selectedSets=[]}openPacks(){if(this.draftingService.resetDraft(this.draftOptions),this.draftOptions.openingMethod==="Individual"){for(let t of this.selectedSets)for(let i=0;i<this.draftOptions.numPacks;i++)this.draftingService.packsToOpen.push(t);this.router.navigate(["classic/opening"])}else this.draftOptions.openingMethod==="Bulk"&&(this.draftingService.packsPerSet=this.draftOptions.numPacks,this.draftingService.setsToOpen=this.selectedSets,this.router.navigate(["classic/bulk-opening"]))}static{this.\u0275fac=function(i){return new(i||n)(C(le),C(A),C(R))}}static{this.\u0275cmp=m({type:n,selectors:[["app-setlist"]],standalone:!1,decls:4,vars:3,consts:[[1,"box"],[3,"onOpenPacks","onSelectAll","onDeselectAll","draftOptionsChange","canOpen","draftOptions"],[1,"wrapping-list","box","set-list","mt-3"],["class","wrapping-item",3,"set","selectedSets","selectedSetsChange",4,"ngFor","ngForOf"],[1,"wrapping-item",3,"selectedSetsChange","set","selectedSets"]],template:function(i,e){i&1&&(r(0,"div",0)(1,"app-drafting-options",1),l("onOpenPacks",function(){return e.openPacks()})("onSelectAll",function(){return e.selectAllSets()})("onDeselectAll",function(){return e.clearSelectedSets()}),_("draftOptionsChange",function(p){return u(e.draftOptions,p)||(e.draftOptions=p),p}),a()(),r(2,"div",2),k(3,Ie,1,2,"app-setlist-pack",3),a()),i&2&&(o(),s("canOpen",e.selectedSets.length>0),h("draftOptions",e.draftOptions),o(2),s("ngForOf",e.cardsets))},dependencies:[j,me,ge],styles:[".set-list[_ngcontent-%COMP%]{height:calc(100vh - 260px);min-height:400px;overflow:auto;contain:strict}"]})}}return n})();function Ee(n,g){if(n&1&&(r(0,"span"),d(1),a()),n&2){let t=f();O("rare-color",t.card.set_rarity==="Rare")("super-rare-color",t.card.set_rarity==="Super Rare")("ultra-rare-color",t.card.set_rarity==="Ultra Rare")("secret-rare-color",t.card.set_rarity==="Secret Rare"),o(),B("",t.card.set_rarity," ")}}var _e=(()=>{class n{constructor(){this.selectable=!1,this.onCardFlipped=new v,this.onCardSelected=new v,this.displayModal=!1}ngOnInit(){}flipCard(){this.card.flipped=!this.card.flipped,this.onCardFlipped.emit(this.index)}onCardClicked(){if(!this.card.flipped)return this.flipCard();this.selectable?(this.card.selected=!this.card.selected,this.card.selected?this.onCardSelected.emit(this.index):this.onCardSelected.emit(-1)):this.displayModal=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=m({type:n,selectors:[["app-pack-card"]],inputs:{card:"card",index:"index",selectable:"selectable"},outputs:{onCardFlipped:"onCardFlipped",onCardSelected:"onCardSelected"},standalone:!1,decls:11,vars:33,consts:[[1,"pack-card"],[1,"flip-card"],[1,"flip-card-inner",3,"click"],[1,"flip-card-front"],["src","https://ygodraft.net/images/cardback.webp","alt","Yugioh Card"],[1,"flip-card-back"],[3,"src","alt"],[1,"rarity"],[3,"rare-color","super-rare-color","ultra-rare-color","secret-rare-color",4,"ngIf"],["appendTo","body",3,"visibleChange","visible","modal","dismissableMask","showHeader","draggable","closable"],["loading","lazy",3,"src","alt"]],template:function(i,e){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),l("click",function(){return e.onCardClicked()}),r(3,"div",3),w(4,"img",4),a(),r(5,"div",5),w(6,"img",6),a()()(),r(7,"div",7),k(8,Ee,2,9,"span",8),a()(),r(9,"p-dialog",9),_("visibleChange",function(p){return u(e.displayModal,p)||(e.displayModal=p),p}),w(10,"img",10),a()),i&2&&(o(),O("selected",e.card.selected),o(),O("flipped",e.card.flipped)("rare-aura-hover",e.card.set_rarity==="Rare")("super-rare-aura-hover",e.card.set_rarity==="Super Rare")("ultra-rare-aura-hover",e.card.set_rarity==="Ultra Rare")("secret-rare-aura-hover",e.card.set_rarity==="Secret Rare"),o(4),O("rare-aura",e.card.set_rarity==="Rare")("super-rare-aura",e.card.set_rarity==="Super Rare")("ultra-rare-aura",e.card.set_rarity==="Ultra Rare")("secret-rare-aura",e.card.set_rarity==="Secret Rare"),T("src","https://ygodraft.net/images/",e.card.card_id,".webp",M),s("alt",e.card.card_name),o(2),s("ngIf",e.card.flipped),o(),h("visible",e.displayModal),s("modal",!0)("dismissableMask",!0)("showHeader",!1)("draggable",!1)("closable",!0),o(),T("src","assets/images/",e.card.card_id,".webp",M),s("alt",e.card.card_name))},dependencies:[L,q],styles:[".pack-card[_ngcontent-%COMP%]{padding:.75rem;text-align:center}.pack-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:210px;height:307px}.rarity[_ngcontent-%COMP%]{height:24px;padding-top:.5rem;text-align:center}.flip-card[_ngcontent-%COMP%]{background-color:transparent;perspective:1000px;width:210px;height:307px;transition:transform .25s}.flip-card-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;text-align:center;transform-style:preserve-3d;transition:transform .8s,box-shadow .3s ease-in-out}.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.flip-card-front[_ngcontent-%COMP%], .flip-card-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden}.flip-card-back[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .25s ease 0s,box-shadow .25s ease 0s;transform-origin:50% 50%}.flip-card-back[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.flip-card-front[_ngcontent-%COMP%]{background-color:#bbb;color:#000;cursor:pointer}.flip-card-back[_ngcontent-%COMP%]{background-color:#1e90ff;color:#fff;transform:rotateY(180deg);cursor:pointer}.selected[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:#fff 0 0 6px 4px;filter:brightness(110%);transform:scale(1.1)}"]})}}return n})();function je(n,g){n&1&&(r(0,"h4"),d(1,"Select 1 card per pack"),a())}function Ae(n,g){if(n&1&&(r(0,"div",10),d(1),a()),n&2){let t=f();o(),B(" ",t.errorMessage,`
`)}}function Re(n,g){if(n&1){let t=E();r(0,"app-pack-card",11),l("onCardFlipped",function(){D(t);let e=f();return I(e.onCardFlipped())})("onCardSelected",function(e){D(t);let c=f();return I(c.onCardSelected(e))}),a()}if(n&2){let t=g.$implicit,i=g.index,e=f();s("card",t)("index",i)("selectable",e.isDrafting)}}function We(n,g){if(n&1){let t=E();r(0,"button",12),l("click",function(){D(t);let e=f();return I(e.nextPack())}),a()}if(n&2){let t=f();s("disabled",!t.canProgress)}}function Ne(n,g){if(n&1){let t=E();r(0,"button",13),l("click",function(){D(t);let e=f();return I(e.goToCollection())}),a()}if(n&2){let t=f();s("disabled",!t.canProgress)}}var Ce=(()=>{class n{constructor(t,i,e){this.router=t,this.draftingService=i,this.messageService=e,this.cardset="",this.packsOpened=0,this.packsToOpen=0,this.allFlipped=!1,this.isDrafting=!1,this.canProgress=!1,this.currentPack=[]}ngOnInit(){this.packsToOpen=this.draftingService.packsToOpen.length;let t=this.draftingService.draftOptions;t&&(this.draftMode=t.draftMode,this.isDrafting=t.drafting),this.packsToOpen===0&&this.router.navigate(["classic"]),this.nextPack()}nextPack(){return S(this,null,function*(){if(this.draftingService.packsToOpen.length!==0){this.cardset=this.draftingService.packsToOpen.shift(),this.packsOpened+=1,this.isDrafting&&this.draftingService.addCardsToDraft(this.getSelectedCards());try{this.currentPack=yield this.draftingService.openSinglePack(this.cardset)}catch{this.errorMessage="Error opening pack"}this.allFlipped=!1}})}onCardFlipped(){this.allFlipped=!this.currentPack.some(t=>!t.flipped),this.updateCanProgress()}onCardSelected(t){this.currentPack=this.currentPack.map(i=>N(W({},i),{selected:!1})),t>=0&&(this.currentPack[t].selected=!0),this.updateCanProgress()}getSelectedCards(){return this.currentPack.filter(t=>t.selected)}updateCanProgress(){this.canProgress=!0,this.allFlipped||(this.canProgress=!1),this.isDrafting&&this.getSelectedCards().length===0&&(this.canProgress=!1)}flipAll(){let t=0,i=30;for(let e of this.currentPack)setTimeout(()=>{e.flipped=!0},t),t+=i;this.allFlipped=!0,this.updateCanProgress()}goToCollection(){return S(this,null,function*(){this.isDrafting&&this.draftingService.addCardsToDraft(this.getSelectedCards());try{yield this.draftingService.createCollection()}catch{this.messageService.add({severity:"error",summary:"Error",detail:"Error creating collection"});return}this.router.navigate(["collections/new"])})}static{this.\u0275fac=function(i){return new(i||n)(C(A),C(R),C(H))}}static{this.\u0275cmp=m({type:n,selectors:[["app-pack-opening"]],standalone:!1,decls:13,vars:9,consts:[[1,"text-center","pt-3","mb-3"],[4,"ngIf"],[1,"ms-2","text-muted"],["class","text-center text-danger",4,"ngIf"],[1,"cards-container"],[3,"card","index","selectable","onCardFlipped","onCardSelected",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["pButton","","type","button","label","Flip All","icon","pi pi-refresh","iconPos","left",1,"p-button-secondary","mx-1",3,"click","disabled"],["pButton","","type","button","label","Next Pack","icon","pi pi-angle-right","iconPos","left","class","p-button mx-1",3,"disabled","click",4,"ngIf"],["pButton","","type","button","label","Go to Collection","icon","pi pi-angle-right","iconPos","left","class","p-button mx-1",3,"disabled","click",4,"ngIf"],[1,"text-center","text-danger"],[3,"onCardFlipped","onCardSelected","card","index","selectable"],["pButton","","type","button","label","Next Pack","icon","pi pi-angle-right","iconPos","left",1,"p-button","mx-1",3,"click","disabled"],["pButton","","type","button","label","Go to Collection","icon","pi pi-angle-right","iconPos","left",1,"p-button","mx-1",3,"click","disabled"]],template:function(i,e){i&1&&(r(0,"div",0)(1,"h2"),d(2),a(),k(3,je,2,0,"h4",1),r(4,"h4",2),d(5),a()(),k(6,Ae,2,1,"div",3),r(7,"div",4),k(8,Re,1,3,"app-pack-card",5),a(),r(9,"div",6)(10,"button",7),l("click",function(){return e.flipAll()}),a(),k(11,We,1,1,"button",8)(12,Ne,1,1,"button",9),a()),i&2&&(o(2),F(e.cardset),o(),s("ngIf",e.isDrafting),o(2),$("",e.packsOpened," / ",e.packsToOpen,""),o(),s("ngIf",e.errorMessage),o(2),s("ngForOf",e.currentPack),o(2),s("disabled",e.allFlipped),o(),s("ngIf",e.packsOpened<e.packsToOpen),o(),s("ngIf",e.packsOpened>=e.packsToOpen))},dependencies:[j,L,G,_e],styles:[".cards-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center;align-content:center}"]})}}return n})();var ke=(()=>{class n{constructor(){this.displayModal=!1}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=m({type:n,selectors:[["app-bulk-card"]],inputs:{card:"card"},standalone:!1,decls:5,vars:37,consts:[["loading","lazy",1,"bulk-card",3,"click","src","alt"],["appendTo","body",3,"visibleChange","visible","modal","dismissableMask","showHeader","draggable","closable"],["loading","lazy",3,"src","alt"],[1,"text-center","mt-3"]],template:function(i,e){i&1&&(r(0,"img",0),l("click",function(){return e.displayModal=!0}),a(),r(1,"p-dialog",1),_("visibleChange",function(p){return u(e.displayModal,p)||(e.displayModal=p),p}),w(2,"img",2),r(3,"h4",3),d(4),a()()),i&2&&(O("rare-aura-small",e.card.set_rarity==="Rare")("super-rare-aura-small",e.card.set_rarity==="Super Rare")("ultra-rare-aura-small",e.card.set_rarity==="Ultra Rare")("secret-rare-aura-small",e.card.set_rarity==="Secret Rare"),T("src","https://ygodraft.net/images/",e.card.card_id,".webp",M),s("alt",e.card.card_name),o(),h("visible",e.displayModal),s("modal",!0)("dismissableMask",!0)("showHeader",!1)("draggable",!1)("closable",!0),o(),O("rare-aura",e.card.set_rarity==="Rare")("super-rare-aura",e.card.set_rarity==="Super Rare")("ultra-rare-aura",e.card.set_rarity==="Ultra Rare")("secret-rare-aura",e.card.set_rarity==="Secret Rare"),T("src","https://ygodraft.net/images/",e.card.card_id,".webp",M),s("alt",e.card.card_name),o(),O("rare-color",e.card.set_rarity==="Rare")("super-rare-color",e.card.set_rarity==="Super Rare")("ultra-rare-color",e.card.set_rarity==="Ultra Rare")("secret-rare-color",e.card.set_rarity==="Secret Rare"),o(),B(" ",e.card.set_rarity," "))},dependencies:[q],styles:[".bulk-card[_ngcontent-%COMP%]{cursor:pointer;background-color:#000}"]})}}return n})();function Ve(n,g){if(n&1&&(r(0,"div",8),w(1,"app-bulk-card",9),a()),n&2){let t=g.$implicit;o(),s("card",t)}}function Le(n,g){if(n&1&&(r(0,"div",6),k(1,Ve,2,1,"div",7),a()),n&2){let t=g.$implicit;o(),s("ngForOf",t)}}var Se=(()=>{class n{constructor(t,i,e){this.router=t,this.draftingService=i,this.messageService=e,this.packs=[],this.setsToOpen=0,this.currentSet=""}ngOnInit(){this.setsToOpen=this.draftingService.setsToOpen.length,this.setsToOpen===0&&this.router.navigate(["classic"]),this.openAllSets()}openAllSets(){return S(this,null,function*(){try{this.packs=yield this.draftingService.openAllSets()}catch{this.errorMessage="There was an error generating the packs."}})}createCollection(){return S(this,null,function*(){try{yield this.draftingService.createCollection()}catch{this.messageService.add({severity:"error",summary:"Error",detail:"Error creating collection"});return}this.router.navigate(["collections/new"])})}static{this.\u0275fac=function(i){return new(i||n)(C(A),C(R),C(H))}}static{this.\u0275cmp=m({type:n,selectors:[["app-bulk-open"]],standalone:!1,decls:7,vars:2,consts:[[1,"text-center","text-danger"],[1,"box","py-2"],[1,"pack-container"],["class","d-flex flex-row justify-content-center",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["pButton","","type","button","label","View as Collection","icon","pi pi-angle-right","iconPos","left",1,"p-button","mx-1",3,"click"],[1,"d-flex","flex-row","justify-content-center"],["class","card-holder text-center py-2",4,"ngFor","ngForOf"],[1,"card-holder","text-center","py-2"],[3,"card"]],template:function(i,e){i&1&&(r(0,"div",0),d(1),a(),r(2,"div",1)(3,"div",2),k(4,Le,2,1,"div",3),a()(),r(5,"div",4)(6,"button",5),l("click",function(){return e.createCollection()}),a()()),i&2&&(o(),F(e.errorMessage),o(3),s("ngForOf",e.packs))},dependencies:[j,G,ke],styles:[".pack-container[_ngcontent-%COMP%]{height:calc(100vh - 200px);min-height:400px;display:block;position:relative;overflow:auto;contain:strict}.card-holder[_ngcontent-%COMP%]{flex:1 1 auto}"]})}}return n})();var ze=[{path:"",component:ue},{path:"opening",component:Ce},{path:"bulk-opening",component:Se}],ye=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=V({type:n})}static{this.\u0275inj=U({imports:[Q.forChild(ze),Q]})}}return n})();var Rt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=V({type:n})}static{this.\u0275inj=U({imports:[ne,ye,ae,se]})}}return n})();export{Rt as DraftingModule};
